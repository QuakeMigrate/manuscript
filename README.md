# Supplementary analysis/visualisation code
This repository is home to supplementary data and visualisation code to support the manuscript:

    Winder, T., Bacon, C.A., Smith, J.D., Hudson, T.S., and White, R.S.
    QuakeMigrate: a Python Package for Automatic Earthquake Detection and Location
    Using Waveform Migration and Stacking. (to be submitted to Seismica).

Open-access paper: [![DOI](https://img.shields.io/badge/)](https://doi.org/)

Supplementary datafiles: [![DOI](https://zenodo.org/badge/DOI/)](https://doi.org/10.5281/zenodo.15236744)

Analysis and visualisation: [![DOI](https://zenodo.org/badge/DOI/)](https://doi.org/)

## Steps to reproduce analysis and figures
1. Clone this repository and navigate to it:

```
git clone https://github.com/QuakeMigrate/manuscript
cd manuscript
```

2. Create a new virtual environment using a tool such as `uv` and install QuakeMigrate. In order to recreate all of the steps used to create the figures in the main manuscript and the supplementary material, we recommend installing QuakeMigrate from PyPI with the optional argument `manuscript`, i.e.:


```
uv venv --python=3.12
source .venv/bin/activate
uv pip install 'quakemigrate[manuscript]'
```

3. Add `qm_manuscript.mplstyle` (a matplotlib stylesheets) to your `mpl_configdir` (usually found at `~/.config/matplotlib`)

4. Optional: Install Helvetica font for Matplotlib

5. Follow the instructions on the QuakeMigrate documentation to install NonLinloc, which is used as the backend for computing the traveltime lookup tables used in the migration and stacking stages.

6. Scripts for building each figure in the main manuscript and the supplementary material are found under sub-directories in the `figures` directory. In most cases, input data for the figures must first be generated by running the scripts (in order) found in the corresponding `generate_results` directories. However, in instances where these require extensive computation we have also included the necessary data files in order to minimise computational requirements. Figures can then be built by running the `.gmt` (as `bash <script>.gmt`) or `.py` (as `python <script>.py`) scripts.

## Notes
These figures were prepared using macOS 15.5. A limited number were produced using Affinity Designer for iPad, a licensed piece of software for graphic design. `.afdesign` files are provided.
